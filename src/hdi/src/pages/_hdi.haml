:javascript 
  $(function(){
    deployment_grid = {
      data : {},
      load_data: function(load_callback){
        this.data = load_callback(); return this;
      },
      refresh_branches: function() {
        var html = '';
        $.each(this.data, function(k, v){
          html += '<li onclick="deployment_grid.select_branch(this)" id="branch_' + k + '">' + k + '</li>';
        });
        $('#branches').html(html);
        return this;
      },
      current_branch: function(){
        return this.data[$('#branches li.selected').attr('id').split('_')[1]]['checkouts']
      },
      current_checkout: function(){
        return this.current_branch()[$('#checkouts li.selected').attr('id').split('_')[1]]
      },
      refresh_checkouts: function() {
        var html = '';
        $.each(this.current_branch(), function(k, v){
          html += '<li onclick="deployment_grid.select_checkout(this)" id="checkout_' + k + '"><code>' + k + '<br/><time datetime="' + v['timestamp'] + '">Deploy timestamp: ' + v['timestamp'] + '</time></code></li>';
        });
        $('#checkouts').html(html);
        return this;
      },
      select_checkout: function(checkout) {
        $('#checkouts li').removeClass('selected');
        $(checkout).addClass('selected');
        $('#output').html(this.current_checkout()['output']);
        return this;
      },
      select_first_checkout: function() {
        this.select_checkout($('#checkouts li:first-child'))
        return this;
      },
      select_branch: function(branch) {
        $('#branches li').removeClass('selected');
        $(branch).addClass('selected');
        this.refresh_checkouts().select_first_checkout();
        return this;
      },
      select_first_branch: function() {
        this.select_branch($('#branches li:first-child'))
        return this;
      },
      resize: function() {
        $('#deployments').css('height', ($(window).height() - 100).toString() + 'px' )
        $('#pre_output').css('height', ($(window).height() - 115).toString() + 'px' )
        $('.data_column').css('height', ($(window).height() - 115).toString() + 'px' )
        return this;
      }
    };
    deployment_grid.load_data(function(){
      return $.parseJSON('{"master":{"deployed":true,"checkouts":{"3a872098def1fd5e6bf70a8c7ec083e618023f71":{"output":"Master branch","timestamp":"2010-09-21 12:40:53"},"23e7209666f1fd5e6bf7777c7ec083888802a4e5":{"output":"' + fake_output + '", "timestamp":"2010-10-10 17:09:10"}}},"test":{"deployed":true,"checkouts":{"11bfe2130005e6b345f71fd5e6bf71fd5e6bf1fd":{"output":"Test branch","timestamp":"2010-09-22 13:33:12"}}}}')
    }).refresh_branches().select_first_branch().resize();
    $(window).resize(function(data) {
      deployment_grid.resize();
    })
  });
  var deployment_grid = null;
  var fake_output = 'Fetching git:github.comqrushnap.git\\nFetching git:github.comManfredbroach.git\\nFetching git:github.comtobidelayed_job.git\\nFetching source index from http:gemcutter.org\\nUpdating git:github.comtobidelayed_job.git\\nUpdating git:github.comManfredbroach.git\\nUpdating git:github.comqrushnap.git\\nUsing rake (0.8.7) from system gems \\nInstalling ZenTest (4.3.2) from rubygems repository at http:gemcutter.org \\nInstalling RubyInline (3.8.4) from rubygems repository at http:gemcutter.org \\nInstalling sexp_processor (3.0.4) from rubygems repository at http:gemcutter.org \\nInstalling ParseTree (3.0.5) from rubygems repository at http:gemcutter.org \\nInstalling activesupport (2.3.8) from rubygems repository at http:gemcutter.org \\nInstalling activerecord (2.3.8) from rubygems repository at http:gemcutter.org \\nUsing addressable (2.1.1) from system gems \\nInstalling ansi (1.2.1) from rubygems repository at http:gemcutter.org \\nUsing bcrypt-ruby (2.1.2) from system gems \\nUsing nap (0.3.1) from git:github.comqrushnap.git (at master) \\nUsing broach (0.1.4) from git:github.comManfredbroach.git (at master) \\nInstalling columnize (0.3.1) from rubygems repository at http:gemcutter.org \\nInstalling contest (0.1.2) from rubygems repository at http:gemcutter.org \\nUsing data_objects (0.10.2) from system gems \\nUsing delayed_job (1.7.0) from git:github.comtobidelayed_job.git (at master) \\nUsing extlib (0.9.15) from system gems \\nUsing dm-core (1.0.0.rc3) from system gems \\nUsing dm-aggregates (1.0.0.rc3) from system gems \\nInstalling dm-do-adapter (1.0.0) from rubygems repository at http:gemcutter.org \\nUsing dm-migrations (1.0.0.rc3) from system gems \\nInstalling do_sqlite3 (0.10.2) from rubygems repository at http:gemcutter.org with native extensions \\nInstalling dm-sqlite-adapter (1.0.0.rc3) from rubygems repository at http:gemcutter.org \\nInstalling randexp (0.1.5) from rubygems repository at http:gemcutter.org \\nInstalling dm-sweatshop (1.0.0) from rubygems repository at http:gemcutter.org \\nUsing dm-timestamps (1.0.0.rc3) from system gems \\nUsing fastercsv (1.5.3) from system gems \\nUsing json_pure (1.4.3) from system gems \\nUsing stringex (1.1.0) from system gems \\nUsing uuidtools (2.1.1) from system gems \\nUsing dm-types (1.0.0.rc3) from system gems \\nUsing dm-validations (1.0.0.rc3) from system gems \\nInstalling facets (2.8.4) from rubygems repository at http:gemcutter.org \\nUsing haml (2.2.17) from system gems \\nInstalling hpricot (0.8.2) from rubygems repository at http:gemcutter.org with native extensions \\nUsing json (1.1.9) from system gems \\nInstalling linecache (0.43) from rubygems repository at http:gemcutter.org with native extensions \\nUsing mime-types (1.16) from system gems \\nInstalling mailfactory (1.4.0) from rubygems repository at http:gemcutter.org \\nInstalling mocha (0.9.8) from rubygems repository at http:gemcutter.org \\nInstalling mustache (0.11.2) from rubygems repository at http:gemcutter.org \\nInstalling nokogiri (1.4.2) from rubygems repository at http:gemcutter.org with native extensions \\nUsing rack (1.1.0) from system gems \\nInstalling rack-test (0.5.0) from rubygems repository at http:gemcutter.org \\nInstalling redgreen (1.2.2) from rubygems repository at http:gemcutter.org \\nInstalling rr (0.10.11) from rubygems repository at http:gemcutter.org \\nInstalling ruby-debug-base (0.10.3) from rubygems repository at http:gemcutter.org with native extensions \\nInstalling ruby-debug (0.10.3) from rubygems repository at http:gemcutter.org \\nInstalling rumbster (1.0.0) from rubygems repository at http:gemcutter.org \\nUsing shout-bot (0.0.4) from system gems \\nUsing sinatra (1.0) from system gems \\nUsing sinatra-authorization (1.0.0) from system gems \\nInstalling tlsmail (0.0.1) from rubygems repository at http:gemcutter.org \\nInstalling sinatra-ditties (0.0.2) from rubygems repository at http:gemcutter.org \\nInstalling sqlite3-ruby (1.3.0) from rubygems repository at http:gemcutter.org with native extensions \\nUsing thor (0.9.9) from system gems \\nInstalling turn (0.7.0) from rubygems repository at http:gemcutter.org \\nInstalling webmock (1.2.2) from rubygems repository at http:gemcutter.org \\nInstalling webrat (0.6.0) from rubygems repository at http:gemcutter.org Your bundle is complete! Use `bundle show [gemname]` to see where a bundled gem is installed.\\n(in tmpintegrity-builds188)\\nIntegrity::Author < DataMapper::Type is deprecated, use the new DataMapper::Property API instead (homedeploy.bundleruby1.8gemsdm-validations-1.0.0.rc3libdm-validations.rb:41:in `new)\\nLoaded suite homedeploy.bundleruby1.8gemsrake-0.8.7librakerake_test_loader\\nStarted\\n...................the base_url setting isnt set\\n.....F............................\\nFinished in 22.797299 seconds.';
